# Copyright (c) 2021, Jacob S. Andersen
#
# This file is part of the modm project.
#
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# This file was autogenerated by the modm cmake builder. Do not modify!

cmake_minimum_required(VERSION 3.15)
%% if is_modm
include(cmake/ModmConfiguration.cmake)
%% endif


%% if asm_sources | length
set_source_files_properties(
%% for file in asm_sources | sort
  {{ file | relocate | modm.posixify  }}
%% endfor
  PROPERTIES LANGUAGE CXX
)

%% endif

%% if sources | length
add_library({{ repo }} OBJECT
%% for file, flags in sources | sort
  {{ file | relocate | modm.posixify  }}
%% endfor
)
%% else
add_library({{ repo }} INTERFACE )
%% endif

%% if per_file_attr | length
%% for section in per_file_attr | sort
{{ section | modm.posixify }}
%% endfor

%% endif

%% if is_modm
add_library(modm_warnings INTERFACE)
add_library(modm_options INTERFACE)
add_library(modm_arch_options INTERFACE)

modm_target_config_create(modm modm_arch_options modm_options modm_warnings)
%% endif

%% if include_paths | length
target_include_directories({{ repo }} SYSTEM
%% if sources | length
  PUBLIC
%% else
  INTERFACE
%% endif
%% for path in include_paths | sort
  {{ path | relocate | modm.posixify  }}
%% endfor
%% if sources | length
  PRIVATE
%% for path in private_include_paths | sort
  {{ path | relocate | modm.posixify  }}
%% endfor
%% endif
)

%% endif



target_link_libraries({{ repo }}
%% if sources | length
  PUBLIC
%% else
  INTERFACE
%%endif
    modm_arch_options
%% if sources | length
  PRIVATE
    project_options
    modm_options
    modm_warnings
%% endif
  )
